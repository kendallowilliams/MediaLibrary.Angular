<ml-card class="w-[500px] h-full">
  <ml-card-header>
    <ml-card-title class="flex w-full">
      <div class="grow">Music Settings</div>
      <fa-icon [icon]="faPenToSquare" class="text-primary cursor-pointer" (click)="showConfigurationEditor()"></fa-icon>
    </ml-card-title>
  </ml-card-header>
  <ml-card-body class="flex flex-col gap-[10px]">
    <div class="grid grid-cols-[150px_1fr] items-start">
      <label mlLabel>Music Paths</label>
      <ml-control-group *ngFor="let musicPath of configuration.musicPaths">
        <div class="px-[10px]">{{musicPath}}</div>
        <button mlSecondaryButton (click)="showDirectorySelectorModal(musicPath)" [variant]="'dark'">
          <fa-icon [icon]="faFolderOpen"></fa-icon>
        </button>
      </ml-control-group>
    </div>
  </ml-card-body>
  <ml-card-footer>
    <div class="flex gap-[5px] items-center h-full w-full justify-end">
      <button mlButton (click)="handleUpload()">Upload File</button>
      <button mlButton (click)="handleRefresh()">Refresh Music</button>
    </div>
  </ml-card-footer>
</ml-card>

<ng-template mlModal [(isOpen)]="isConfigurationEditorOpen">
  <ml-music-configuration-editor [(configuration)]="editConfigurationState"></ml-music-configuration-editor>
</ng-template>

<ng-template mlModal [(isOpen)]="isDirectorySelectorModalOpen">
  @if (selectedMusicPath) {
    <ml-music-directory-selector [rootPath]="selectedMusicPath"></ml-music-directory-selector>
  }
</ng-template>